---
title: '🐧 中文环境、时区同步与SSH安全加固'
description: '本教程将引导您完成在新服务器上配置中文环境、同步中国标准时间以及通过禁用密码登录来增强SSH安全性的完整步骤。'
updateTime: "2025-08-21 09:06:32"
tags:
  - Linux
  - 服务器
  - SSH
  - 安全
  - 中文环境
  - 教程
---

## 服务器基础配置：中文环境、时区同步与SSH安全加固

在初始化一台新的云服务器（尤其是在非中文区域创建的实例）时，我们常常面临几个基础但至关重要的问题：如何正确显示中文字符、如何确保服务器时间与我们所在的时区一致，以及如何保障服务器的远程访问安全。

本文将为您提供一个清晰、实用的操作指南，一步步完成以下核心配置：

1. **安装中文语言支持**：解决终端或应用中中文乱码的问题。
2. **同步中国标准时间（CST）**：确保日志记录、计划任务等时间相关的功能准确无误。
3. **强化SSH安全**：禁用密码登录，强制使用密钥认证，大幅提升服务器的安全性。

本教程以基于 Debian/Ubuntu 的系统为例（使用 `apt` 作为包管理器），其他 Linux 发行版请酌情调整命令。

## 第一步：安装中文字体和语言包

为了让服务器的操作系统能够正确解析和显示中文字符，我们需要安装必要的中文字体和语言包。`locales-all` 包可以帮助我们预生成所有支持的语言环境，避免后续手动生成的麻烦。

```bash
# 更新软件包列表
apt update

# 安装文泉驿正黑字体和所有地区/语言设置包
apt install -y fonts-wqy-zenhei locales-all
```

- `fonts-wqy-zenhei`：这是一个开源的、高质量的黑体中文字体库，覆盖了 GBK 字符集，能满足绝大多数中文显示需求。
- `locales-all`：这个包包含了所有可用的 locale 数据。安装它会消耗一些磁盘空间，但可以一劳永逸地解决语言环境缺失的问题。

## 第二步：配置系统区域设置为中文

安装完语言包后，我们需要通过一个简单的配置命令来激活中文语言环境，使其成为系统可选项。

运行 `dpkg-reconfigure` 命令，它会提供一个交互式的界面来选择和设置系统默认的语言环境。

```bash
dpkg-reconfigure locales
```

执行上述命令后，您会看到一个语言列表。请按以下步骤操作：

1. 使用键盘的「下箭头」键向下滚动，找到 `zh_CN.UTF-8 UTF-8` 这一项。
2. 按「空格键」选中它（前面出现 `[*]` 代表已选中）。
3. 按「Tab」键切换到 `<Ok>` 按钮，然后按「回车」。
4. 在下一个界面中，再次选择 `zh_CN.UTF-8` 作为系统默认的 locale，然后切换到 `<Ok>` 并「回车」。

系统会重新生成 locale 文件。配置完成后，您的服务器就具备了完整的中文环境支持。

## 第三步：设置时区为中国标准时间

服务器的日志文件、定时任务（Cron jobs）以及许多应用程序都高度依赖于准确的系统时间。将时区设置为 `Asia/Shanghai`（即中国标准时间，UTC+8）可以确保时间的一致性。

使用 `timedatectl` 命令可以轻松完成设置：

```bash
timedatectl set-timezone Asia/Shanghai
```

设置成功后，您可以运行 `timedatectl` 或 `date` 命令来验证当前的时间和时区是否正确。

```bash
# 查看当前时间和时区状态
timedatectl

# 或者直接查看日期和时间
date
```

您应该能看到类似 `CST 2025-08-21 ...` 的输出，表明时区已正确设置为中国标准时间。

## 第四步：增强SSH安全：禁用密码登录

依赖密码进行SSH登录存在被暴力破解的风险。**最佳安全实践是禁用密码登录，强制使用更安全的SSH密钥对进行身份验证。**

在执行此操作前，**请务必确认您已经配置好了SSH密钥，并且可以通过密钥成功登录服务器**，否则您将可能将自己锁在服务器之外！

1. **编辑SSH配置文件**

    使用您喜欢的文本编辑器（如 `vim` 或 `nano`）打开 SSH 的主配置文件 `/etc/ssh/sshd_config`：

    ```bash
    vim /etc/ssh/sshd_config
    ```

2. **修改配置项**

    在文件中找到以下三项，并确保它们的值如下所示。如果某一项不存在，可以手动在文件末尾添加。

    ```ini
    # 禁止 root 用户使用密码登录，但仍允许通过密钥登录。
    # 这是比直接 `PermitRootLogin no` 更灵活的设置。
    PermitRootLogin prohibit-password

    # 禁止所有用户使用密码进行身份验证。
    PasswordAuthentication no

    # 确保公钥认证是开启的（通常默认为 yes）。
    PubkeyAuthentication yes
    ```

    - `PermitRootLogin prohibit-password`：这个设置非常有用，它阻止了 `root` 账户使用密码登录，但保留了通过 SSH 密钥以 `root` 身份登录的能力。
    - `PasswordAuthentication no`：这是核心安全设置，它会全局禁用基于密码的登录方式。
    - `PubkeyAuthentication yes`：明确声明开启基于公钥的认证。

3. **重启SSH服务**

    保存并关闭配置文件后，需要重启 SSH 服务以使新的配置生效。

    ```bash
    systemctl restart sshd
    ```

    现在，当您尝试使用密码登录服务器时，将会被拒绝访问，只有持有正确私钥的用户才能成功登录。

## 总结

通过以上四个简单的步骤，我们不仅为服务器配置了完整的中文支持环境和正确的时区，还通过禁用密码登录极大地增强了其安全性。这些基础配置虽然简单，但对于服务器的长期稳定运行和安全维护至关重要，建议在每一台新服务器上都完成这些初始化设置。
